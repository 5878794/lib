"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}DEVICE.mulit_touch_evnet=function(){function multiTouchEvent(opt){_classCallCheck(this,multiTouchEvent);this.changeFn=opt.changeFn||function(){};this.touchBeforeMoveNumber=0;this.startPoints=null;this.points=[];this.angleFn=DEVICE.angle;this.deg=0;this.scale=1;this.maxScale=opt.maxScale||4;this.minScale=opt.minScale||0.25;this._addEvent();}_createClass(multiTouchEvent,[{key:"_addEvent",value:function _addEvent(){var _this=this;window.addEventListener(DEVICE.START_EV,function(e){e=e.touches||e;_this._startEvent(e);},false);window.addEventListener(DEVICE.MOVE_EV,function(e){e.preventDefault();e=e.touches||e;_this._moveEvent(e);},false);window.addEventListener(DEVICE.END_EV,function(e){e=e.touches||e;_this._endEvent(e);},false);window.addEventListener(DEVICE.CANCEL_EV,function(e){e=e.touches||e;_this._endEvent(e);},false);}},{key:"_startEvent",value:function _startEvent(e){this._savePoint(e);}},{key:"_moveEvent",value:function _moveEvent(e){if(this.touchBeforeMoveNumber==0){this.touchBeforeMoveNumber=e.length;this.startPoints=this.points[this.points.length-1];}this._savePoint(e);if(e.length==2&&this.touchBeforeMoveNumber==2){this._handler2Touches();}}},{key:"_endEvent",value:function _endEvent(e){if(e.length==0){this._delPoint();}else{this._savePoint(e);}}},{key:"_savePoint",value:function _savePoint(e){var new_e=JSON.parse(JSON.stringify(e));this.points.push(new_e);}},{key:"_delPoint",value:function _delPoint(){this.points=[];this.startPoints=null;this.touchBeforeMoveNumber=0;}},{key:"_handler2Touches",value:function _handler2Touches(){if(this.points.length<2){return;}var points=this.points,startPoints=points[points.length-2],endPoints=points[points.length-1];if(startPoints.length!=2||endPoints.length!=2){return;}var abs=Math.abs,sqrt=Math.sqrt,s1_x=startPoints[0].screenX,s1_y=startPoints[0].screenY,s2_x=startPoints[1].screenX,s2_y=startPoints[1].screenY,e1_x=endPoints[0].screenX,e1_y=endPoints[0].screenY,e2_x=endPoints[1].screenX,e2_y=endPoints[1].screenY,c_x=s1_x+(s2_x-s1_x)/2,c_y=s1_y+(s2_y-s1_y)/2,s_l=sqrt((s1_x-s2_x)*(s1_x-s2_x)+(s1_y-s2_y)*(s1_y-s2_y)),e_l=sqrt((e1_x-e2_x)*(e1_x-e2_x)+(e1_y-e2_y)*(e1_y-e2_y)),move=e_l-s_l,deg1=this.angleFn({x:s1_x,y:s1_y},{x:c_x,y:c_y},{x:e1_x,y:e1_y}),deg2=this.angleFn({x:s2_x,y:s2_y},{x:c_x,y:c_y},{x:e2_x,y:e2_y}),touch1IsClockwise=this._clockwise({x:s1_x,y:s1_y},{x:c_x,y:c_y},{x:e1_x,y:e1_y}),touch2IsClockwise=this._clockwise({x:s1_x,y:s1_y},{x:c_x,y:c_y},{x:e1_x,y:e1_y});var scale=move>=0?this.scale+move/100:this.scale+move/100;scale=DEVICE.getBetweenNumber(scale,this.minScale,this.maxScale);this.scale=scale;var deg=deg1>deg2?deg1:deg2;if(touch1IsClockwise==touch2IsClockwise){deg=touch1IsClockwise?deg:-deg;deg=this.deg+deg;this.deg=deg;}else{deg=this.deg;}this.changeFn(scale,deg);}},{key:"_clockwise",value:function _clockwise(p1,p2,p3){var dx1=p1.x-p2.x,dy1=p1.y-p2.y,dx2=p3.x-p2.x,dy2=p3.y-p2.y,dx=dx1*dy2-dx2*dy1;return dx>0;}}]);return multiTouchEvent;}();

//# sourceMappingURL=multi_touch_event-compiled.js.map